(this["webpackJsonpfollow-along-app"]=this["webpackJsonpfollow-along-app"]||[]).push([[0],{39:function(t,n,e){},40:function(t,n,e){"use strict";e.r(n);var o=e(15),c=e.n(o),r=e(6),a=e(4),i=e(2),u=e(0),l=function(t){var n=t.note,e=t.toggleImportance,o=t.deleteNote,c=n.important?"make not important":"make important";return Object(u.jsxs)("li",{className:"note",children:[n.content,Object(u.jsx)("button",{onClick:e,children:c}),Object(u.jsx)("button",{onClick:o,children:"Delete Note"})]})},s=function(t){var n=t.message;return null===n?null:Object(u.jsx)("div",{className:"error",children:n})},f=e(3),d=e.n(f),j="http://localhost:3001/api/notes",b={getAll:function(){var t=d.a.get(j),n={id:1e4,content:"This note is not saved to server",date:"2019-05-30T17:30:31.098Z",important:!0};return t.then((function(t){return t.data.concat(n)}))},create:function(t){return d.a.post(j,t).then((function(t){return t.data}))},update:function(t,n){return d.a.put("".concat(j,"/").concat(t),n).then((function(t){return t.data}))},remove:function(t){return d.a.delete("".concat(j,"/").concat(t)).then((function(t){return t.data}))}},m=(e(39),function(t){var n=Object(i.useState)([]),e=Object(a.a)(n,2),o=e[0],c=e[1],f=Object(i.useState)("a new note..."),d=Object(a.a)(f,2),j=d[0],m=d[1],p=Object(i.useState)(!0),h=Object(a.a)(p,2),O=h[0],v=h[1],g=Object(i.useState)(null),x=Object(a.a)(g,2),w=x[0],k=x[1];Object(i.useEffect)((function(){b.getAll().then((function(t){c(t)}))}),[]);var N=O?o:o.filter((function(t){return!0===t.important}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Notes"}),Object(u.jsx)(s,{message:w}),Object(u.jsx)("div",{children:Object(u.jsxs)("button",{onClick:function(){return v(!O)},children:["show ",O?"important":"all"]})}),Object(u.jsx)("ul",{children:N.map((function(t){return Object(u.jsx)(l,{note:t,toggleImportance:function(){return function(t){var n=o.find((function(n){return n.id===t})),e=Object(r.a)(Object(r.a)({},n),{},{important:!n.important});b.update(t,e).then((function(n){c(o.map((function(e){return e.id!==t?e:n})))})).catch((function(e){k("Note '".concat(n.content,"' was already removed from server")),setTimeout((function(){k(null)}),5e3),c(o.filter((function(n){return n.id!==t})))}))}(t.id)},deleteNote:function(){return n=t,e=t.id,void(window.confirm("Delete note:  ".concat(n.content,"? "))&&b.remove(e).then((function(t){var n=o.filter((function(t){return t.id!==e}));c(n)})));var n,e}},t.id)}))}),Object(u.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n={content:j,date:(new Date).toISOString(),important:Math.random()<.5};b.create(n).then((function(t){c(o.concat(t)),m("")}))},children:[Object(u.jsx)("input",{value:j,onChange:function(t){m(t.target.value)}}),Object(u.jsx)("button",{type:"submit",children:"save"})]})]})});c.a.render(Object(u.jsx)(m,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.4e6f21b5.chunk.js.map